%% -*- mode: erlang -*-
{deps, [
    {emqx, {git_subdir, "https://github.com/emqx/emqx.git", {tag, "v5.8.2"}, "apps/emqx"}},
    {emqx_ctl, {git_subdir, "https://github.com/emqx/emqx.git", {tag, "v5.8.2"}, "apps/emqx_ctl"}},
    {emqx_utils,
        {git_subdir, "https://github.com/emqx/emqx.git", {tag, "v5.8.2"}, "apps/emqx_utils"}},
    {emqx_durable_storage,
        {git_subdir, "https://github.com/emqx/emqx.git", {tag, "v5.8.2"},
            "apps/emqx_durable_storage"}},
    {emqx_ds_backends,
        {git_subdir, "https://github.com/emqx/emqx.git", {tag, "v5.8.2"}, "apps/emqx_ds_backends"}},
    {emqx_ds_builtin_local,
        {git_subdir, "https://github.com/emqx/emqx.git", {tag, "v5.8.2"},
            "apps/emqx_ds_builtin_local"}},
    {emqtt, {git, "https://github.com/emqx/emqtt.git", {tag, "1.13.5"}}}
]}.

{plugins, [
    {emqx_plugrel, {git, "https://github.com/emqx/emqx_plugrel.git", {tag, "0.6.1"}}},
    {erlfmt, "1.3.0"}
]}.

{erl_opts, [debug_info]}.

%% this is the release version, different from app vsn in .app file
{relx, [
    {release, {emqx_rpush, "0.1.0"}, [emqx_rpush]},
    {dev_mode, false},
    {include_erts, false}
]}.

%% Additional info of the plugin
{emqx_plugrel, [
    {authors, ["EMQX Hotpot Team"]},
    {builder, [
        {name, "EMQX Hotpot Team"},
        {contact, "abuse@emqx.com"},
        {website, "http://www.emqx.com"}
    ]},
    {repo, "https://github.com/emqx/emqx-usage-examples/tree/master/emqx_rpush"},
    {functionality, ["MQTT bridge with retained message lazy forwarding"]},
    {compatibility, [{emqx, "~> 5.8"}]},
    {description, "EMQX Rpush Plugin"}
]}.

{xref_checks, [
    undefined_function_calls,
    undefined_functions,
    locals_not_used,
    deprecated_function_calls,
    warnings_as_errors,
    deprecated_functions
]}.
